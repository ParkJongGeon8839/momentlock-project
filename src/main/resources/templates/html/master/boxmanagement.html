<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Document</title>
	<link rel="stylesheet" type="text/css" th:href="@{/css/main.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/nav.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/commons/commons.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/managerpagetoolex.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/css/noticebox.css}" />
	<link rel="stylesheet" th:href="@{/css/commons/pagination.css}" />
</head>

<body>
	<div th:replace="~{fragments/sidebar :: sidebar}"></div>
	<div id="mainContainer" class="blurContainer">
		<div th:replace="~{fragments/nav :: nav}"></div>
		
		<div class="managerpagetoolex-modal-container">
			<div class="managerpagetoolex-tab-nav">
				<ul>
					<li class="tabs"><a th:href="@{/momentlock/membermanagement}">회원관리</a></li>
			        <li class="tabs active"><a th:href="@{/momentlock/boxmanagement}">상자관리</a></li>
			        <li class="tabs"><a th:href="@{/momentlock/capsulemanagement}">타임캡슐 관리</a></li>
					<li class="tabs"><a th:href="@{/momentlock/subscriptionmanagement}">구독관리</a></li>
				</ul>
			</div>
			
			<!-- 모달창 -->
			<div class="modal_3">
			    <h1>상자 페이지</h1>
			    <!-- <table> 태그로 전체를 감싸줍니다. -->
			    <table class="box-table">
			        <!-- thead는 헤더를 정의합니다. (선택사항이지만 권장) -->
			        <thead>
			            <tr>
			                <th>번호</th>
			                <th>상자명</th>
			                <th>공개여부</th>
			                <th>생성일</th>
			                <th>삭제</th>
			            </tr>
			        </thead>
			        <!-- tbody가 실제 데이터 목록을 담습니다. -->
			        <tbody>
			            <tr th:each="box, stat : ${boxPage.content}">
			                <td th:text="${boxPage.totalElements - (boxPage.number * boxPage.size) - stat.index}">10</td>
			                <td th:text="${box.boxname}">기본 상자</td>
			                <td th:text="${box.boxreleasecode}">공개</td>
			                <td th:text="${box.boxregdate}">2025-10-02</td>
			                <td class="delete-cell">
			                    <form th:action="@{/momentlock/boxes/delete/{id}(id=${box.boxid})}" method="post" onsubmit="return confirm('정말로 이 상자를 삭제하시겠습니까?');">
			                        <button type="submit" class="delete-btn">삭제</button>
									<input type="hidden" th:name="${_csrf != null ? _csrf.parameterName : ''}" 
								            th:value="${_csrf != null ? _csrf.token : ''}" />
			                    </form>
			                </td>
			            </tr>
			            <!-- 데이터가 없을 경우 -->
			            <tr th:if="${boxPage.empty}">
			                <td colspan="5" class="no-data">표시할 상자 데이터가 없습니다.</td>
			            </tr>
			        </tbody>
			    </table>
				<div th:if="${!boxPage.empty}" id="pagination-container">
					<ul class="pagination">
						<li class="arrow" th:classappend="${boxPage.first} ? 'disabled'">
					        <a th:href="@{/momentlock/boxmanagement(page=0)}">«</a>
						</li>
						<!-- '이전' 페이지로 이동 버튼 -->
						<li class="arrow" th:classappend="${!boxPage.hasPrevious()} ? 'disabled'">
							<a th:href="@{/momentlock/boxmanagement(page=${boxPage.number - 1})}">‹</a>
						</li>
																   			                     
						<!-- 페이지 번호 목록 (예: 1 2 3 4 5) -->
						<li class="pagenumber" th:each="pageNumber : ${#numbers.sequence(0, boxPage.totalPages - 1)}" th:classappend="${pageNumber == boxPage.number} ? 'active'">
							<a th:href="@{/momentlock/boxmanagement(page=${pageNumber})}" th:text="${pageNumber + 1}"></a>
						</li>
																   			                     
						<!-- '다음' 페이지로 이동 버튼 -->
						<li class="arrow" th:classappend="${!boxPage.hasNext()} ? 'disabled'">
							<a th:href="@{/momentlock/boxmanagement(page=${boxPage.number + 1})}">›</a>
						</li>
						<!-- '마지막' 페이지로 이동 버튼 -->
						<li class="arrow" th:classappend="${boxPage.last} ? 'disabled'">
							<a th:href="@{/momentlock/boxmanagement(page=${boxPage.totalPages - 1})}">»</a>
						</li>
					</ul>										 
				</div>	
			</div>
		</div>	
	</div>
	<div th:replace="~{fragments/footer :: footer}"></div>
	<script th:src="@{/js/nav.js}" defer></script>
	<script th:src="@{/js/managerpagetoolex.js}" defer></script>
</body>

</html>