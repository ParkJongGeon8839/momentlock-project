<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Document</title>
	<link rel="stylesheet" th:href="@{/css/main.css}" />
	<link rel="stylesheet" th:href="@{/css/nav.css}" />
	<link rel="stylesheet" th:href="@{/css/commons/commons.css}" />
	<link rel="stylesheet" th:href="@{/css/managerpagetoolex.css}" />
	<link rel="stylesheet" th:href="@{/css/noticebox.css}" />
	<link rel="stylesheet" th:href="@{/css/commons/pagination.css}" />
</head>

<body>
	<div th:replace="~{fragments/sidebar :: sidebar}"></div>
	<div id="mainContainer" class="blurContainer">
		<div th:replace="~{fragments/nav :: nav}"></div>
		
		<div class="managerpagetoolex-modal-container">
			<div class="managerpagetoolex-tab-nav">
				<ul>
					<li class="tabs"><a th:href="@{/momentlock/membermanagement}">회원관리</a></li>
			        <li class="tabs"><a th:href="@{/momentlock/boxmanagement}">상자관리</a></li>
			        <li class="tabs active"><a th:href="@{/momentlock/capsulemanagement}">타임캡슐 관리</a></li>
					<li class="tabs"><a th:href="@{/momentlock/subscriptionmanagement}">구독관리</a></li>
				</ul>
			</div>
			
			<!-- 모달창 -->
			<div class="modal_3">
			  <h1>타임캡슐 관리</h1>
			  <table class="box-table">
				<thead>
					<tr>
					  <th>번호</th>
				      <th>제목</th>
					  <th>닉네임</th>
					  <th>생성일</th>
					  <th>삭제</th>
					</tr>
				</thead>
				<tbody>
					   <tr th:each="capsule, stat : ${capsulePage.content}">
						  <td th:text="${capsulePage.totalElements - (capsulePage.number * capsulePage.size) - stat.index}">10</td>
						  <td th:text="${capsule.captitle}">캡슐제목</td>
						  <td th:text="${capsule.member.nickname}">닉네임</td>
						  <td th:text="${capsule.capregdate}">2025-10-02</td>
					      <td>
							<form th:action="@{/momentlock/capsule/updateToTDY}" method="post" onsubmit="return confirm('정말로 이 캡슐를 삭제하시겠습니까?');">
								<input type="hidden" name="capid" th:value="${capsule.capid}" />
								<button type="submit" th:if="${capsule.capdelcode == 'TDN'}" class="delete-btn">삭제</button>
							  
							</form>
						  </td>
					   </tr>
					   <tr th:if="${capsulePage.empty}">
						 <td colspan="5">표시할 캡슐 데이터가 없습니다.</td>
					   </tr>
			     </tbody>
				 </table>
				 <div th:if="${!capsulePage.empty}" id="pagination-container">
				 	<ul class="pagination">
				 		<li class="arrow" th:classappend="${capsulePage.first} ? 'disabled'">
				 			<a th:href="@{/momentlock/capsulemanagement(page=0)}">«</a>
				 		</li>
				 		<!-- '이전' 페이지로 이동 버튼 -->
				 		<li class="arrow" th:classappend="${!capsulePage.hasPrevious()} ? 'disabled'">
				 			<a th:href="@{/momentlock/capsulemanagement(page=${capsulePage.number - 1})}">‹</a>
				 		</li>
				 																   			                     
				 		<!-- 페이지 번호 목록 (예: 1 2 3 4 5) -->
				 		<li class="pagenumber" th:each="pageNumber : ${#numbers.sequence(0, capsulePage.totalPages - 1)}" th:classappend="${pageNumber == capsulePage.number} ? 'active'">
				 			<a th:href="@{/momentlock/capsulemanagement(page=${pageNumber})}" th:text="${pageNumber + 1}"></a>
				 		</li>
				 																   			                     
				 		<!-- '다음' 페이지로 이동 버튼 -->
				 		<li class="arrow" th:classappend="${!capsulePage.hasNext()} ? 'disabled'">
				 			<a th:href="@{/momentlock/capsulemanagement(page=${capsulePage.number + 1})}">›</a>
				 		</li>
				 		<!-- '마지막' 페이지로 이동 버튼 -->
				 		<li class="arrow" th:classappend="${capsulePage.last} ? 'disabled'">
				 			<a th:href="@{/momentlock/capsulemanagement(page=${capsulePage.totalPages - 1})}">»</a>
				 		</li>
				 	</ul>										 
				 </div>
			  </div>
			 
		</div>	
	</div>
	<div th:replace="~{fragments/footer :: footer}"></div>
	<script th:src="@{/js/nav.js}" defer></script>
	<script th:src="@{/js/managerpagetoolex.js}" defer></script>
	<body>

</html>